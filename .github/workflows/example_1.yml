name: Check Tickets (New Action)
on:
  workflow_dispatch:
  schedule:
    - cron: '*/5 * * * *' # 5분마다 자동 실행
jobs:
  job:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
    
    # 1. 📦 Action Checkout (스크립트 파일 가져오기)
    - name: Checkout Code
      uses: actions/checkout@v4
    
    # 2. 🐍 Python 환경 설정
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.x'
        
    # 3. 🚨 새로운 멜론 티켓 감시 Action 실행 (6개 감시 통합)
    #    * 이 Action은 SHA 문제가 없습니다.
    - name: Run Melon Ticket Checker for 6 Steps
      uses: a-n-t-o-n-i/melon-ticket-checker@v1.0.0
      with:
        product_id: '211782'
        
        # 1일차 (schedule-id: 100001)
        schedule_id_1: '100001'
        seat_ids_1: '10000,10008,12051' # VIP, 일반, 시제
        messages_1: 'VIP 좌석 풀렸습니다! (1일차), 일반석 풀렸습니다! (1일차), 시제석 풀렸습니다! (1일차)'
        
        # 2일차 (schedule-id: 100002)
        schedule_id_2: '100002'
        seat_ids_2: '10000,10008,12051' # VIP, 일반, 시제
        messages_2: 'VIP 좌석 풀렸습니다! (2일차), 일반석 풀렸습니다! (2일차), 시제석 풀렸습니다! (2일차)'

        slack_webhook_url: ${{ secrets.SLACK_WEBHOOK_URL }}
