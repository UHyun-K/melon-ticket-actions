name: Check Tickets
on:
  workflow_dispatch:
  schedule:
    - cron: '*/5 * * * *'
jobs:
  job:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
    # -------------------------------------------------------------
    # 0. ğŸ“¢ GitHub Action Slack ì•Œë¦¼ í…ŒìŠ¤íŠ¸ (Slack-Action ì‚¬ìš©)
    # -------------------------------------------------------------
    - name: Test Slack Notification (Action)
      uses: slackapi/slack-github-action@v1.24.0 # â¬…ï¸ ì´ Actionìœ¼ë¡œ ë³€ê²½
      with:
        payload: |
          {
            "text": "ğŸ“¢ GitHub Actions ì•Œë¦¼ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì„±ê³µ!! (Action)",
            "blocks": [
              {
                "type": "section",
                "text": {
                  "type": "mrkdwn",
                  "text": "ğŸ“¢ *GitHub Actions ì•Œë¦¼ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì„±ê³µ!! (Action)*\nì›¹í›… URL ì •ìƒ í™•ì¸."
                }
              }
            ]
          }
      env:
        SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }} # â¬…ï¸ Secrets ì‚¬ìš©
        
    # -------------------------------------------------------------
    # -------------------------------------------------------------
    # 1ì¼ì°¨ ê³µì—° (schedule-id: 100001) ê°ì‹œ ì‹œì‘
    # -------------------------------------------------------------

    # 1. ğŸ¥‡ 1ì¼ì°¨ VIP ë“±ê¸‰ ê°ì‹œ
    - name: Check Tickets - VIP ë“±ê¸‰ (1ì¼ì°¨)
      uses: mooyoul/melon-ticket-actions@v1
      with:
        product-id: 211782
        schedule-id: 100001
        seat-id: 10000
        slack-incoming-webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
        message: 'VIP ì¢Œì„ í’€ë ¸ìŠµë‹ˆë‹¤! (1ì¼ì°¨) ì¦‰ì‹œ êµ¬ë§¤í•˜ì„¸ìš”!!'

    # 2. ğŸ¥ˆ 1ì¼ì°¨ R ë“±ê¸‰ ê°ì‹œ
    - name: Check Tickets - R ë“±ê¸‰ (1ì¼ì°¨)
      uses: mooyoul/melon-ticket-actions@v1
      with:
        product-id: 211782
        schedule-id: 100001
        seat-id: 10008
        slack-incoming-webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
        message: 'ì¼ë°˜ì„ í’€ë ¸ìŠµë‹ˆë‹¤! (1ì¼ì°¨) ì¦‰ì‹œ êµ¬ë§¤í•˜ì„¸ìš”!!'

    # 3. ğŸ¥‰ 1ì¼ì°¨ S ë“±ê¸‰ ê°ì‹œ
    - name: Check Tickets - S ë“±ê¸‰ (1ì¼ì°¨)
      uses: mooyoul/melon-ticket-actions@v1
      with:
        product-id: 211782
        schedule-id: 100001
        seat-id: 12051
        slack-incoming-webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
        message: 'ì‹œì œì„ í’€ë ¸ìŠµë‹ˆë‹¤! (1ì¼ì°¨) ì¦‰ì‹œ êµ¬ë§¤í•˜ì„¸ìš”!!'

    # -------------------------------------------------------------
    # 2ì¼ì°¨ ê³µì—° (schedule-id: 100002) ê°ì‹œ ì‹œì‘
    # -------------------------------------------------------------

    # 4. ğŸ¥‡ 2ì¼ì°¨ VIP ë“±ê¸‰ ê°ì‹œ
    - name: Check Tickets - VIP ë“±ê¸‰ (2ì¼ì°¨)
      uses: mooyoul/melon-ticket-actions@v1
      with:
        product-id: 211782
        schedule-id: 100002
        seat-id: 10000
        slack-incoming-webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
        message: 'VIP ì¢Œì„ í’€ë ¸ìŠµë‹ˆë‹¤! (2ì¼ì°¨) ì¦‰ì‹œ êµ¬ë§¤í•˜ì„¸ìš”!!'

    # 5. ğŸ¥ˆ 2ì¼ì°¨ R ë“±ê¸‰ ê°ì‹œ
    - name: Check Tickets - R ë“±ê¸‰ (2ì¼ì°¨)
      uses: mooyoul/melon-ticket-actions@v1
      with:
        product-id: 211782
        schedule-id: 100002
        seat-id: 10008
        slack-incoming-webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
        message: 'ì¼ë°˜ì„ í’€ë ¸ìŠµë‹ˆë‹¤! (2ì¼ì°¨) ì¦‰ì‹œ êµ¬ë§¤í•˜ì„¸ìš”!!'

    # 6. ğŸ¥‰ 2ì¼ì°¨ S ë“±ê¸‰ ê°ì‹œ
    - name: Check Tickets - S ë“±ê¸‰ (2ì¼ì°¨)
      uses: mooyoul/melon-ticket-actions@v1
      with:
        product-id: 211782
        schedule-id: 100002
        seat-id: 12051
        slack-incoming-webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
        message: 'ì‹œì œì„ í’€ë ¸ìŠµë‹ˆë‹¤! (2ì¼ì°¨) ì¦‰ì‹œ êµ¬ë§¤í•˜ì„¸ìš”!!'
